syntax = "proto3";

message Memo {

  UserSwap user_swap = 1;
  // string because the minimum receive may be very high due to decimal points
  string minimum_receive = 2;
  uint64 timeout_timestamp = 3;
  PostAction post_swap_action = 4;
  string recovery_addr = 5;

  // we dont need swap amount since it will be sent via cw20 or native, and we
  // use that
  message SwapExactAssetIn {
    // or adapter name so that the smart router can redirect to the right swap
    // router.
    string swap_venue_name = 1;
    repeated SwapOperation operations = 2;
  }

  message SmartSwapExactAssetIn {
    string swap_venue_name = 1;
    repeated Route routes = 2;
  }

  message Route {
    string offer_amount = 1;
    repeated SwapOperation operations = 2;
  }

  message SwapOperation {
    string poolId = 1;
    string denomIn = 2;
    string denomOut = 3;
  }

  // if none is provided -> error, if more than one attributes are provided ->
  // error
  message UserSwap {
    optional SwapExactAssetIn swap_exact_asset_in = 1;
    optional SmartSwapExactAssetIn smart_swap_exact_asset_in = 2;
  }

  // Can possibly have both? -> if both then always contract_call first then ibc
  // transfer
  message PostAction {
    optional IbcTransfer ibc_transfer_msg = 1;
    optional ContractCall contract_call = 2;
  }

  message IbcTransfer {
    string source_channel = 1;
    string source_port = 2;
    string receiver = 3;
    string memo = 4;
    string recover_address = 5;
  }

  message ContractCall {
    string contract_address = 1;
    string msg = 2;
  }
}
